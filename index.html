<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>מחשבון מדידה ותמחור מקלחון</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600&display=swap');
    @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css');

    body {
      font-family: 'Assistant', sans-serif;
      margin: 20px;
      background-color: #f0f2f5;
      direction: rtl;
      color: #333;
    }

    h1 {
      text-align: center;
      font-weight: 600;
      color: #007bff;
      margin-bottom: 20px;
    }

    form {
      background: white;
      padding: 20px;
      border-radius: 12px;
      max-width: 500px;
      margin: auto;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      border: 1px solid #ddd;
    }

    label {
      display: block;
      margin-top: 15px;
      font-weight: 600;
      color: #007bff;
    }

    .flex-row {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }

    .flex-row input {
      flex: 1;
    }

    input, select, button {
      box-sizing: border-box;
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ddd;
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }

    input:focus, select:focus {
      border-color: #007bff;
      box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
    }

    button {
      background-color: #007bff;
      color: white;
      font-weight: bold;
      cursor: pointer;
      border: none;
      transition: all 0.3s ease;
      margin-top: 20px;
    }

    button:hover {
      background-color: #0056b3;
    }

    .result {
      margin-top: 20px;
      background: #e8f8e8;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      font-size: 18px;
      border: 1px solid #b2d8b2;
      display: none;
    }

    .result strong {
      display: block;
      margin-bottom: 5px;
    }
  </style>
</head>
<body>

<h1><i class="fas fa-calculator"></i> מחשבון מדידה ותמחור מקלחון</h1>

<form id="calculatorForm">
  <label for="type">בחר סוג מקלחון:</label>
  <select id="type" required>
    <option value="" disabled selected>בחר סוג מקלחון</option>
    <option value="quadrant">מקלחון רבע עגול</option>
    <option value="rectangular">מקלחון מלבני</option>
    <option value="wall-adjacent">מקלחון צמוד קיר</option>
    <option value="shower-door">דלת מקלחון</option>
    <option value="bathtub-screen">מסך אמבטיה</option>
    <option value="rectangular-partition">מקלחון מלבני עם קיר מחיצה</option>
    <option value="rectangular-slant">מקלחון מלבני עם שיפוע</option>
  </select>

  <div id="measurements"></div>

  <button type="submit"><i class="fas fa-check"></i> חשב</button>
  <div class="result" id="resultBox"></div>
</form>

<script>
  const form = document.getElementById('calculatorForm');
  const measurementsDiv = document.getElementById('measurements');
  const resultBox = document.getElementById('resultBox');

  document.getElementById('type').addEventListener('change', function (e) {
    const type = e.target.value;
    measurementsDiv.innerHTML = '';

    if (type === 'quadrant' || type === 'rectangular' || type === 'wall-adjacent') {
      measurementsDiv.innerHTML += `
        <label for="installMethod">שיטת התקנה:</label>
        <select id="installMethod" required>
          <option value="" disabled selected>בחר שיטת התקנה</option>
          <option value="tray">על מגש מקלחון</option>
          <option value="tile-edge">ללא מגש - קו חיצוני של המקלחון על קצה האריח</option>
          <option value="glass-line">ללא מגש - קו הזכוכית על קצה האריח</option>
        </select>
      `;
      measurementsDiv.innerHTML += `
        <label for="frontWidth">רוחב חלק קדמי (X):</label>
        <input type="number" step="0.01" min="0" id="frontWidth" placeholder="רוחב חלק קדמי (מ׳)" required>
      `;
      measurementsDiv.innerHTML += `
        <label for="sideWidth">רוחב חלק צדדי (Y):</label>
        <input type="number" step="0.01" min="0" id="sideWidth" placeholder="רוחב חלק צדדי (מ׳)" required>
      `;
      measurementsDiv.innerHTML += `
        <label for="height">גובה המקלחון (H):</label>
        <input type="number" step="0.01" min="0" id="height" placeholder="גובה (מ׳)" required>
      `;
      measurementsDiv.innerHTML += `
        <label for="deviationTop">סטייה קיר למעלה:</label>
        <input type="number" step="0.01" min="0" id="deviationTop" placeholder="סטייה קיר למעלה (מ׳)" required>
      `;
      measurementsDiv.innerHTML += `
        <label for="deviationMiddle">סטייה קיר באמצע:</label>
        <input type="number" step="0.01" min="0" id="deviationMiddle" placeholder="סטייה קיר באמצע (מ׳)" required>
      `;
      measurementsDiv.innerHTML += `
        <label for="deviationBottom">סטייה קיר למטה:</label>
        <input type="number" step="0.01" min="0" id="deviationBottom" placeholder="סטייה קיר למטה (מ׳)" required>
      `;
    }

    if (type === 'shower-door' || type === 'bathtub-screen' || type === 'rectangular-partition' || type === 'rectangular-slant') {
      measurementsDiv.innerHTML += `
        <label for="nicheWidth1">רוחב נישה למטה (X1):</label>
        <input type="number" step="0.01" min="0" id="nicheWidth1" placeholder="רוחב נישה למטה (מ׳)" required>
      `;
      measurementsDiv.innerHTML += `
        <label for="nicheWidth2">רוחב נישה באמצע (X2):</label>
        <input type="number" step="0.01" min="0" id="nicheWidth2" placeholder="רוחב נישה באמצע (מ׳)" required>
      `;
      measurementsDiv.innerHTML += `
        <label for="nicheWidth3">רוחב נישה למעלה (X3):</label>
        <input type="number" step="0.01" min="0" id="nicheWidth3" placeholder="רוחב נישה למעלה (מ׳)" required>
      `;
      measurementsDiv.innerHTML += `
        <label for="height">גובה המקלחון (H):</label>
        <input type="number" step="0.01" min="0" id="height" placeholder="גובה (מ׳)" required>
      `;
      measurementsDiv.innerHTML += `
        <label for="deviationTop">סטייה קיר למעלה:</label>
        <input type="number" step="0.01" min="0" id="deviationTop" placeholder="סטייה קיר למעלה (מ׳)" required>
      `;
      measurementsDiv.innerHTML += `
        <label for="deviationMiddle">סטייה קיר באמצע:</label>
        <input type="number" step="0.01" min="0" id="deviationMiddle" placeholder="סטייה קיר באמצע (מ׳)" required>
      `;
      measurementsDiv.innerHTML += `
        <label for="deviationBottom">סטייה קיר למטה:</label>
        <input type="number" step="0.01" min="0" id="deviationBottom" placeholder="סטייה קיר למטה (מ׳)" required>
      `;
    }

    if (type === 'rectangular-partition' || type === 'rectangular-slant') {
      measurementsDiv.innerHTML += `
        <label for="partitionWidth">רוחב קיר מחיצה (Q):</label>
        <input type="number" step="0.01" min="0" id="partitionWidth" placeholder="רוחב קיר מחיצה (מ׳)" required>
      `;
      measurementsDiv.innerHTML += `
        <label for="partitionHeight">גובה קיר מחיצה (W):</label>
        <input type="number" step="0.01" min="0" id="partitionHeight" placeholder="גובה קיר מחיצה (מ׳)" required>
      `;
    }

    if (type === 'rectangular-slant' || type === 'shower-door-with-slant') {
      measurementsDiv.innerHTML += `
        <label for="slantHeight">גובה תחילת השיפוע (W):</label>
        <input type="number" step="0.01" min="0" id="slantHeight" placeholder="גובה תחילת השיפוע (מ׳)" required>
      `;
      measurementsDiv.innerHTML += `
        <label for="slantAngle">ערך זווית השיפוע (α):</label>
        <input type="number" step="0.01" min="0" id="slantAngle" placeholder="ערך זווית השיפוע (α)" required>
      `;
      measurementsDiv.innerHTML += `
        <label for="bathroomHeight">גובה חדר האמבטיה (H):</label>
        <input type="number" step="0.01" min="0" id="bathroomHeight" placeholder="גובה חדר האמבטיה (מ׳)" required>
      `;
    }
  });

  form.addEventListener('submit', function (e) {
    e.preventDefault();

    const type = document.getElementById('type').value;
    const height = parseFloat(document.getElementById('height').value);
    const deviationTop = parseFloat(document.getElementById('deviationTop').value);
    const deviationMiddle = parseFloat(document.getElementById('deviationMiddle').value);
    const deviationBottom = parseFloat(document.getElementById('deviationBottom').value);

    let price = 0;

    if (type === 'quadrant' || type === 'rectangular' || type === 'wall-adjacent') {
      const installMethod = document.getElementById('installMethod').value;
      const frontWidth = parseFloat(document.getElementById('frontWidth').value);
      const sideWidth = parseFloat(document.getElementById('sideWidth').value);

      // חישוב מחיר לפי סוג המקלחון
      price = (frontWidth + sideWidth) * height; // דוגמה לחישוב מחיר בסיסי
    }

    if (type === 'shower-door' || type === 'bathtub-screen' || type === 'rectangular-partition' || type === 'rectangular-slant') {
      const nicheWidth1 = parseFloat(document.getElementById('nicheWidth1').value);
      const nicheWidth2 = parseFloat(document.getElementById('nicheWidth2').value);
      const nicheWidth3 = parseFloat(document.getElementById('nicheWidth3').value);

      // חישוב רוחב מינימלי
      const minWidth = Math.min(nicheWidth1, nicheWidth2, nicheWidth3);

      // חישוב מחיר לפי סוג המקלחון
      price = minWidth * height; // דוגמה לחישוב מחיר בסיסי
    }

    if (type === 'rectangular-partition' || type === 'rectangular-slant') {
      const partitionWidth = parseFloat(document.getElementById('partitionWidth').value);
      const partitionHeight = parseFloat(document.getElementById('partitionHeight').value);
      // חישוב נוסף למחיצות לפי רוחב וגובה המחיצה
      price += partitionWidth * partitionHeight;
    }

    if (type === 'rectangular-slant' || type === 'shower-door-with-slant') {
      const slantHeight = parseFloat(document.getElementById('slantHeight').value);
      const slantAngle = parseFloat(document.getElementById('slantAngle').value);
      const bathroomHeight = parseFloat(document.getElementById('bathroomHeight').value);
      // חישוב נוסף עבור שיפוע וזווית
      price += (bathroomHeight - slantHeight) * Math.tan((slantAngle * Math.PI) / 180);
    }

    const vatRate = 0.18;
    const priceWithVAT = price * (1 + vatRate);

    // הצגת התוצאות
    resultBox.style.display = 'block';
    resultBox.innerHTML = `
      <strong>המחיר לפני מע״מ:</strong> ₪${price.toFixed(2)}<br>
      <strong>המחיר כולל מע״מ (18%):</strong> ₪${priceWithVAT.toFixed(2)}
    `;
  });
</script>

</body>
</html>